/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Kotlin library project to get you started.
 */

plugins {
    // Apply the Kotlin JVM plugin to add support for Kotlin on the JVM.
    id 'org.jetbrains.kotlin.jvm' version '1.3.31'
    
    id 'eclipse'
    
    id 'org.jetbrains.dokka' version '0.10.0'
    
    id 'maven-publish'
}

repositories {
    // Use jcenter for resolving dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

dependencies {
    // Use the Kotlin JDK 8 standard library.
    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'
    
    // khttp library to perform http requests
    implementation 'khttp:khttp:1.0.0'
    
    // Use the Kotlin test library.
    testImplementation 'org.jetbrains.kotlin:kotlin-test'

    // Use the Kotlin JUnit integration.
    testImplementation 'org.jetbrains.kotlin:kotlin-test-junit'
}

group = 'com.github.gotham25.turbosmtp'
version = project.hasProperty('version') ? project.getProperty('version') : ''

task dokkaJavadoc(type: org.jetbrains.dokka.gradle.DokkaTask) {
    outputFormat = 'javadoc'
    outputDirectory = 'build/dokkaJavadoc'
}

task sourcesJar(type: Jar, dependsOn: classes) {
	classifier = 'sources'
	from sourceSets.main.allSource
}

task dokkaJavaDocJar(type: Jar, dependsOn: dokkaJavadoc) {
	classifier = 'javadoc'
	from dokkaJavadoc.outputDirectory
}


artifacts {
	archives sourcesJar
	archives dokkaJavaDocJar
}

publishing {
	publications {
		maven(MavenPublication) {
			groupId 'com.github.gotham25.turbosmtp'
			artifactId 'TurboSMTP'
			version project.hasProperty('version') ? project.getProperty('version') : ''
			
			from components.java
			artifact(sourcesJar)
			artifact(dokkaJavaDocJar)
		}
	}
}